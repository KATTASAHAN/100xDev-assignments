<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <input type="text" id="title" />
    <input type="text" id="desc" />
    <button id="add" onclick="addTodo()">Add ToDo</button>
    <div id="container"></div>
    <template id="temp">
      <div class="div">
        <div id="tTitle"></div>
        <div id="tdesc"></div>
        <button id="mark"></button>
      </div>
    </template>
    <script>
      let id = 6;
      const data = [
        { id: 1, title: "toDo 1", desc: "1. Desc", done: false },
        { id: 2, title: "toDo 2", desc: "2. Desc", done: true },
        { id: 3, title: "toDo 3", desc: "3. Desc", done: false },
        { id: 4, title: "toDo 4", desc: "4. Desc", done: false },
        { id: 5, title: "toDo 5", desc: "5. Desc", done: true },
      ];
      const container = document.getElementById("container");

      function addTodo() {
        const title = document.getElementById("title").value;
        const desc = document.getElementById("desc").value;
        data.push({ id: ++id, title: title, desc: desc, done: false });
        updateTodo(id);
      }

      function removeTodo(key) {}

      function readTodos() {}

      function updateTodo(key) {}

      function refresh() {
        container.innerHTML = null;
        data.forEach((e, i) => {
          container.append(renderTodo(i, e.id, e.title, e.desc, e.done));
        });
      }
      function renderTodo(idx, id, title, desc, done) {
        const template = document
          .getElementById("temp")
          .content.cloneNode(true);
        const d = template.querySelector(".div");
        d.id = id;
        template.getElementById("tTitle").innerText = title;
        template.getElementById("tdesc").innerText = desc;
        const btn = template.getElementById("mark");
        btn.innerText = done ? "Done" : "Mark as Done";
        btn.addEventListener("click", () => {
          let re = document.getElementById(id);
          re.remove();
          //   data.splice(idx, 1);
          //   data[idx].done = true;
          //   refresh();
        });
        return template;
      }
      refresh();
    </script>
  </body>
</html>
